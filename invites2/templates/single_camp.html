{% extends "base.html" %}

{% block title %}Invitations for Spark Camp {{ camp.theme }}{% endblock %}

{% block pagestyles %}
    th.headerSortUp {
        background-color: #f3edd2;
    }
    
    th.headerSortDown {
        background-color: #d9edf7;
    }
{% endblock %}   

{% block pageheader %}Invitations for Spark Camp {{ camp.theme }}{% endblock %}

{% block content %}
        {% if invitations %}
            <div class="row">
                <div class="span2 offset2">
                    <h3>{{ confirmed|length }}</h3>
                    <p>confirmed</p>
                </div>
                <div class="span2">
                    <h3>{{ percent_women }}%</h3>
                    <p>women</p>
                </div>
                <div class="span2">
                    <h3>{{ percent_poc }}%</h3>
                    <p>people of color</p>
                </div>
                <div class="span2">
                    <h3>{{ percent_journos }}%</h3>
                    <p>journalists</p>
                </div>
            </div>
            <hr />
            <div class="row">
                <div class="span12">
                    <table class="table table-bordered table-striped" id="invites-table">
                        <thead>
                            <tr id="invites-header" title="Click header to sort. Hold shift to sort on multiple columns.">
                                <th>Invite No.</th>
                                <th>First name</th>
                                <th>Last name</th>
                                <th>Status</th>
                                <th>Stipend</th>
                                <th>Roommate</th>
                                <th>Ignite</th>
                                <th>Expires</th>
                            </tr>
                        </thead>                        
                    {% for invite in invitations %}
                        <tr>
                            <td><a href="{% url invitation invite.rand_id %}">{{ invite.rand_id }}</a></td>
                            <td>{{ invite.user.first_name }}</td>
                            <td>{{ invite.user.last_name }}</td>
                            <td>{{ invite.status }}</td>
                            <td>{% if invite.stipend %}<a href="{% url invite_related rand_id=invite.rand_id main_object='Stipend' %}">Yes</a>{% endif %}</td>
                            <td>{% if invite.roommate %}<a href="{% url invite_related rand_id=invite.rand_id main_object='Roommate' %}">Yes</a>{% endif %}</td>
                            <td>{% if invite.ignite %}<a href="{% url invite_related rand_id=invite.rand_id main_object='Ignite' %}">Yes</a>{% endif %}</td>
                            <td>{{ invite.expires }}</td>
                        </tr>
                    {% endfor %}
                    </table>
                    {% if camp.spreadsheet_url %}
                    <form class="form-inline" action="{% url google_sync camptheme=camp.theme %}" method="get">
                        <p><strong>Sync this with Google Spreadsheet.</strong></p>
                        <label for="deadline">Number of days till expiration: </label>
                        <div class="input-append">
                            <input type="text" class="input-mini" value="14" name="deadline"><input class="btn" type="submit" value="Submit" />
                        </div>
                    </form>
                    {% endif %}
                    <p><a href="{% url dietary camptheme=camp.theme %}">Dietary preferences</a> | <a href="{% url stipends camptheme=camp.theme %}">Stipend requests</a></p>
                </div>
            </div>
            
        {% else %}
            <p>No invitations found.</p>
        {% endif %}
{% endblock %}

{% block scripts %}
<script src="{{ STATIC_URL }}js/jquery.tablesorter.min.js"></script>
<script src="{{ STATIC_URL }}js/bootstrap-tooltip.js"></script>

<script type="text/javascript">
 $(document).ready(function() {
    $("#invites-table").tablesorter({
        sortList: [[3,0],[2,0]]
    });
    $("#invites-header").tooltip();
  });
</script>
{% endblock %}